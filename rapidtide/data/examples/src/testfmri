#!/bin/bash

#for fittype in None quad fastquad COM gauss fastgauss
for fittype in gauss
do
    #for similaritymetric in hybrid mutualinfo correlation
    for similaritymetric in hybrid
    do
	rapidtide \
	    --similaritymetric ${similaritymetric} \
            --isatest \
	    --searchrange -10 15 \
	    --numnull 50000 \
	    --nprocs -1 \
            --motionfile fakemotion.par \
	    --passes 3 \
	    --nolimitoutput \
	    --despecklepasses 4 \
            --numtozero 4 \
            --motionfile fakemotion.par \
            --saveintermediatemaps \
            --checkpoint \
	    --acfix \
	    --filterband lfo \
	    --corrweighting regressor \
	    --corrtype linear \
            --usemultiprocmotionglm \
	    --peakfittype ${fittype} \
	    nobackground.nii.gz \
            --corrmask bigmask \
	    ../dst/sub-RAPIDTIDETEST_nobackground
    done
done
#    ../extrasrc/diffmaps \
#        ../dst/sub-RAPIDTIDETEST_${fittype}_simcalcrangetrunc \
#        ../dst/sub-RAPIDTIDETEST_${fittype} \
#        ../dst/thediff_${fittype}

#rapidtide \
	#--spatialfilt 2 \
        #--nprocs -1 \
        #--passes 3 \
        #--nofitfilt \
        #--similaritymetric hybrid \
        #--norefinedespeckled \
        #--CVR \
        #--regressor lforegressor_0p5x.txt \
        #--filterband lfo \
        #--corrtype linear \
        #sub-RAPIDTIDETEST.nii.gz \
        #../dst/sub-RAPIDTIDETEST_CVR0p5x
